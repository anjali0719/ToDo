<div class="dashboard-container">
  <div class="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-title">TASK SCHEDULER</span>
      <span class="sidebar-menu-icon">&#9776;</span>
    </div>
    <div class="sidebar-search" [formGroup]="searchForm">
      <search tuiSearch>
        <tui-textfield iconStart="@tui.search">
          <input formControlName="search" placeholder="Search" tuiTextfield />
        </tui-textfield>
      </search>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">TASKS</div>
      <div class="sidebar-item [active]='false'">
        <span class="sidebar-icon">&#9776;</span>Today
        <span class="sidebar-badge">5</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&#187;</span> Upcoming
        <span class="sidebar-badge">12</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&hearts;</span>Favourites
        <span class="sidebar-badge">5</span>
      </div>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">CATEGORY</div>
      <div class="sidebar-item">
        <span class="sidebar-dot" style="background: #ff5a5f"></span> Personal
        <span class="sidebar-badge">3</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-dot" style="background: #4fc3f7"></span> Work
        <span class="sidebar-badge">6</span>
      </div>
      <div class="sidebar-item add-list">
        <span class="sidebar-icon">+</span> Add New Category
      </div>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">TAGS</div>
      <div class="sidebar-tags">
        <button class="sidebar-tag">Tag 1</button>
        <button class="sidebar-tag">Tag 2</button>
        <button class="sidebar-tag add-tag">+ Add Tag</button>
      </div>
    </div>
    <div class="sidebar-footer">
      <div class="sidebar-item">
        <span class="sidebar-icon">&#9776;</span> Settings
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&#8635;</span> Sign out
      </div>
    </div>
  </div>
  <div class="todo-main">
    <div class="todo-header">
      <span class="todo-title">Today</span>
      <span class="todo-badge">5</span>
    </div>
    <div class="todo-add" (click)="openAddNewTask()">
      <span class="todo-add-icon">+</span> Add New Task
    </div>
    <div class="todo-list">
      @for (todo of todos; track todo.id){
      <div
        class="todo-item"
        (click)="selectToDo(todo)"
        [class.active]="selectedToDo?.id === todo.id"
      >
        <input type="checkbox" />
        <span class="todo-task">{{
          todo.description ? todo.description : "No decsription added yet!"
        }}</span>
        <div class="todo-details">
          <span class="todo-date"
            ><span class="todo-icon">&#128197;</span> 22-03-22</span
          >
          <!-- <span class="todo-badge small">1 Subtasks</span> -->
          <span class="todo-dot" style="background: #ff5a5f"></span>
          <span class="todo-label">Personal</span>
        </div>
        <span class="todo-arrow">&#8250;</span>
      </div>
      }
    </div>
  </div>
  @if(selectedToDo){
  <div class="todo-edit-panel" [formGroup]="addUpdateTodoForm">
    <div class="edit-header">
      <span class="edit-title">Task Details:</span>
      <button class="edit-close" (click)="closeEditPanel()">&times;</button>
    </div>
    <tui-textfield tuiTextfieldSize="m">
      <!-- <label tuiLabel></label> -->
      <textarea
        placeholder="Title"
        formControlName="title"
        tuiTextarea
      ></textarea>
    </tui-textfield>
    <tui-textfield
      class="edit-textarea"
      [style.margin-block-end.rem]="1"
      iconStart="@tui.pencil"
      tuiTextfieldSize="l"
    >
      <!-- <label tuiLabel>Limit</label> -->
      <textarea
        placeholder="Description"
        tuiTextarea
        formControlName="description"
      ></textarea>
    </tui-textfield>
    <div class="edit-row" [formGroup]="searchForm">
      <label tuiLabel>List</label>
      <tui-textfield
        class="edit-select"
        tuiChevron
        tuiTextfieldSize="m"
        [tuiTextfieldCleaner]="false"
      >
        <input
          placeholder="I am placeholder"
          tuiSelect
          formControlName="value"
        />
        <tui-data-list-wrapper
          *tuiTextfieldDropdown
          new
          [items]="listOptions"
        />
      </tui-textfield>
    </div>

    <div class="edit-row">
      <label tuiLabel>Choose a date</label>
      <tui-textfield class="edit-date">
        <input tuiInputDate [formControl]="dateControl" />
        <tui-calendar *tuiTextfieldDropdown />
      </tui-textfield>
    </div>
    <div class="edit-row">
      <label>Tags</label>
      <div class="edit-tags">
        <button class="edit-tag">Tag 1</button>
        <button class="edit-tag add-tag">+ Add Tag</button>
      </div>
    </div>
    <div class="edit-footer">
      <button
        class="edit-delete"
        tuiButton
        [disabled]="isAddingNew"
        (click)="deleteTask(selectedToDo.id!)"
      >
        Delete Task
      </button>
      <button class="edit-save" tuiButton>
        {{ isAddingNew ? "Add task" : "Save changes" }}
      </button>
    </div>
  </div>
  }
</div>
