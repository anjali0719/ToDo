<div class="dashboard-container">
  <div class="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-title">TASK SCHEDULER</span>
      <span class="sidebar-menu-icon">&#9776;</span>
    </div>
    <div class="sidebar-search" [formGroup]="searchForm">
      <!-- <input type="text" placeholder="Search" /> -->
      <search tuiSearch>
        <tui-textfield iconStart="@tui.search">
          <input formControlName="search" placeholder="Search" tuiTextfield />
        </tui-textfield>
      </search>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">TASKS</div>
      <div class="sidebar-item [active]='false'">
        <span class="sidebar-icon">&#9776;</span>Today
        <span class="sidebar-badge">5</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&#187;</span> Upcoming
        <span class="sidebar-badge">12</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&hearts;</span>Favourites
        <span class="sidebar-badge">5</span>
      </div>
      <!-- <div class="sidebar-item">
        <span class="sidebar-icon">&#128197;</span> Calendar
      </div> -->
      <!-- <div class="sidebar-item">
        <span class="sidebar-icon">&#128196;</span> Sticky Wall
      </div> -->
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">CATEGORY</div>
      <div class="sidebar-item">
        <span class="sidebar-dot" style="background: #ff5a5f"></span> Personal
        <span class="sidebar-badge">3</span>
      </div>
      <div class="sidebar-item">
        <span class="sidebar-dot" style="background: #4fc3f7"></span> Work
        <span class="sidebar-badge">6</span>
      </div>
      <!-- <div class="sidebar-item">
        <span class="sidebar-dot" style="background: #ffd600"></span> List 1
        <span class="sidebar-badge">3</span>
      </div> -->
      <div class="sidebar-item add-list">
        <span class="sidebar-icon">+</span> Add New Category
      </div>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-section-title">TAGS</div>
      <div class="sidebar-tags">
        <button class="sidebar-tag">Tag 1</button>
        <button class="sidebar-tag">Tag 2</button>
        <button class="sidebar-tag add-tag">+ Add Tag</button>
      </div>
    </div>
    <div class="sidebar-footer">
      <div class="sidebar-item">
        <span class="sidebar-icon">&#9776;</span> Settings
      </div>
      <div class="sidebar-item">
        <span class="sidebar-icon">&#8635;</span> Sign out
      </div>
    </div>
  </div>
  <div class="todo-main">
    <div class="todo-header">
      <span class="todo-title">Today</span>
      <span class="todo-badge">5</span>
    </div>
    <div class="todo-add" (click)="openAddNewTask()">
      <span class="todo-add-icon">+</span> Add New Task
    </div>
    <div class="todo-list">
      <!-- <div class="todo-item">
        <input type="checkbox" />
        <span class="todo-task">Research content ideas</span>
        <span class="todo-arrow">&#8250;</span>
      </div> -->
      <!-- <div class="todo-item">
        <input type="checkbox" />
        <span class="todo-task">Create a database of guest authors</span>
        <span class="todo-arrow">&#8250;</span>
      </div> -->

      @for (todo of todos; track todo.id){
      <div
        class="todo-item"
        (click)="selectToDo(todo)"
        [class.active]="selectedToDo?.id === todo.id"
      >
        <input type="checkbox" />
        <span class="todo-task">{{
          todo.description ? todo.description : "No decsription added yet!"
        }}</span>
        <div class="todo-details">
          <span class="todo-date"
            ><span class="todo-icon">&#128197;</span> 22-03-22</span
          >
          <!-- <span class="todo-badge small">1 Subtasks</span> -->
          <span class="todo-dot" style="background: #ff5a5f"></span>
          <span class="todo-label">Personal</span>
        </div>
        <span class="todo-arrow">&#8250;</span>
      </div>
      }
      <!-- <div class="todo-item">
        <input type="checkbox" />
        <span class="todo-task">Consult accountant</span>
        <div class="todo-details">
          <span class="todo-dot" style="background:#FFD600"></span> <span class="todo-label">List</span>
          <span class="todo-badge small">3 Subtasks</span>
        </div>
        <span class="todo-arrow">&#8250;</span>
      </div> -->
      <!-- <div class="todo-item">
        <input type="checkbox" />
        <span class="todo-task">Print business card</span>
        <span class="todo-arrow">&#8250;</span>
      </div> -->
    </div>
  </div>
  @if(selectedToDo){
  <div class="todo-edit-panel" [formGroup]="addUpdateTodoForm">
    <div class="edit-header">
      <span class="edit-title">Task Details:</span>
      <button class="edit-close" (click)="closeEditPanel()">&times;</button>
    </div>
    <input
      class="edit-input"
      type="text"
      placeholder="Title"
      formControlName="title"
    />
    <textarea
      class="edit-textarea"
      placeholder="Description"
      formControlName="description"
    ></textarea>
    <div class="edit-row">
      <label>List</label>
      <select class="edit-select">
        <option>Personal</option>
        <option>Work</option>
        <option>List 1</option>
      </select>
    </div>
    <div class="edit-row">
      <!-- <label>Due date</label>
      <input class="edit-date" type="date" value="2022-03-11" /> -->
    </div>
    <div class="edit-row">
      <label>Tags</label>
      <div class="edit-tags">
        <button class="edit-tag">Tag 1</button>
        <button class="edit-tag add-tag">+ Add Tag</button>
      </div>
    </div>
    <div class="edit-subtasks">
      <!-- <div class="edit-subtasks-header">Subtasks:</div>
            <div class="edit-subtask add-subtask">
                <span class="edit-add-icon">+</span> Add New Subtask
            </div>
            <div class="edit-subtask">
                <input type="checkbox" /> Subtask
            </div> -->
    </div>
    <div class="edit-footer">
      <button class="edit-delete" tuiButton [disabled]="isAddingNew" (click)="deleteTask(selectedToDo.id!)">
        Delete Task
      </button>
      <button class="edit-save" tuiButton>
        {{ isAddingNew ? "Add task" : "Save changes" }}
      </button>
    </div>
  </div>
  }
</div>
